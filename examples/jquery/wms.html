<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>TomTom JavaScript SDK - Map</title>
		<link rel="stylesheet" type="text/css" href="../../css/map.css" />
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript" src="../../js/OpenLayers-2.12.min.js"></script>
        <script type="text/javascript" src="../../js/jquery/tomtom.map.js"></script>
        <script type="text/javascript" src="../apikey.js"></script>
        <script>
			$(function() {
				
				tomtom.setImagePath("../../images/");
				
				var markerOptions = {
					url: "marker.png", 
					width: 51,
					height: 60,
					offsetWidth: -21,
					offsetHeight: -49
				};
				
				map = new tomtom.Map({
					domNode: "map"
				});
				
				var ia_wms = new OpenLayers.Layer.WMS("Nexrad","http://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n0r-t.cgi?",{layers:"nexrad-n0r-wmst",transparent:true,format:'image/png',time:"2005-08-29T13:00:00Z"});
				
				map.addLayer(ia_wms);
				
				manager = new tomtom.MarkerManager({ map: map, animation: { effect: "drop", delay: 250, duration: 1000 } });
				
				map.events.register("mapload", window, function() {
					manager.addMarker(new tomtom.Marker(-104.98485, 39.73845, markerOptions));
					manager.addMarker(new tomtom.Marker(-118.24334, 34.05224, markerOptions));
					manager.addMarker(new tomtom.Marker(-122.42017, 37.78008, markerOptions));
					
					manager.update();
					
					// set the layer index so that it appears below the markers (which are at index 50)
					map.setLayerIndex(ia_wms, 1);
					map.setLayerIndex(map._defaultMarkerLayer, 50);
				});
				
			});
			
        </script>
        <style type="text/css">
        	html, body {
        		width: 100%;
        		height: 100%;
        		margin: 0;
        		padding: 0;
        	}
        </style>
	</head>
	<body>
		<div style="width: 100%; height: 100%;" id="map"></div>
	</body>
</html>