<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>TomTom JavaScript SDK - Map</title>
		<link rel="stylesheet" type="text/css" href="../../css/map.css" />
		<script src="http://ajax.googleapis.com/ajax/libs/dojo/1.8.0/dojo/dojo.js"></script>
        <script type="text/javascript" src="../../js/OpenLayers-2.12.min.js"></script>
        <script type="text/javascript" src="../../js/tomtom.map.js"></script>
        <script type="text/javascript" src="../apikey.js"></script>
        <script>
        	require(["dojo/query", "dojo/ready"], function(query, ready) {
        		
        		ready(function() {
        		
	        		tomtom.setImagePath("../../images/");
	        		
	        		var map = new tomtom.Map({
	        			domNode: "map1",
	        			cookie: true,
	        			scale: true
	        		});
	        		
	        		var manager = new tomtom.MarkerManager({ map: map, animation: { effect: "drop", delay: 120, duration: 1000 } });
	        		
	        		map.events.register("mapload", window, function() {
		        		manager.addMarker(new tomtom.Marker(-104.98485, 39.73845));
		        		manager.addMarker(new tomtom.Marker(-118.24334, 34.05224));
		        		manager.addMarker(new tomtom.Marker(-122.42017, 37.78008));
		        		
		        		manager.update();
	        		});
	        		
	        		var map2 = new tomtom.Map({
	        			domNode: document.getElementById("map2")
	        		});
	        		
	        		function toggleMap(id, map) {        			
	        			if (map) {
	        				map.destroy();
	        				return null;
	        			} else {
	        				return new tomtom.Map({
	        					domNode: id,
	        					cookie: true
	        				});
	        			}
	        		}
	        		
	        		query("#mapToggle1").on("click", function() { map = toggleMap("map1", map); });
	        		query("#mapToggle2").on("click", function() { map2 = toggleMap("map2", map2); });
        		
        		});
        		
        	});
        </script>
        <style type="text/css">
        	html, body {
        		width: 100%;
        		height: 100%;
        		margin: 0;
        		padding: 0;
        	}
        	
        	#map1, #map2 {
        		width: 400px;
        		height: 300px;
        	}
        </style>
	</head>
	<body>
		<div id="map1"></div>
		<button id="mapToggle1">Toggle Map1</button>
		<div id="map2"></div>
		<button id="mapToggle2">Toggle Map2</button>
	</body>
</html>