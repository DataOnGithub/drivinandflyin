<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src&#x2F;main&#x2F;webapp&#x2F;js&#x2F;tomtom&#x2F;controls&#x2F;OverviewMap.js - TomTom JavaScript SDK</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="http:&#x2F;&#x2F;www.tomtom.com&#x2F;global&#x2F;images&#x2F;tomtom-logo_tcm166-3340.png" title="TomTom JavaScript SDK"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.6-RELEASE</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/tomtom.Animation.html">tomtom.Animation</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.Cluster.html">tomtom.Cluster</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.ClusterMarker.html">tomtom.ClusterMarker</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.ClusterPopup.html">tomtom.ClusterPopup</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.controls.AutoComplete.html">tomtom.controls.AutoComplete</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.controls.ContextMenu.html">tomtom.controls.ContextMenu</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.controls.OverviewMap.html">tomtom.controls.OverviewMap</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.controls.PanZoomBar.html">tomtom.controls.PanZoomBar</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.controls.RouteControl.html">tomtom.controls.RouteControl</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.CustomIcon.html">tomtom.CustomIcon</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.CustomMarker.html">tomtom.CustomMarker</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.dom.DomUtil.html">tomtom.dom.DomUtil</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.dom.DomUtilResult.html">tomtom.dom.DomUtilResult</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.layers.MapLayer.html">tomtom.layers.MapLayer</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.layers.MarkerLayer.html">tomtom.layers.MarkerLayer</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.layers.TrafficIncidentLayer.html">tomtom.layers.TrafficIncidentLayer</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.layers.TrafficLayer.html">tomtom.layers.TrafficLayer</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.Main.html">tomtom.Main</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.Map.html">tomtom.Map</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.Marker.html">tomtom.Marker</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.MarkerManager.html">tomtom.MarkerManager</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.Popup.html">tomtom.Popup</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.services.GeocodingService.html">tomtom.services.GeocodingService</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.services.InitializeService.html">tomtom.services.InitializeService</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.services.LegacyGeocodingService.html">tomtom.services.LegacyGeocodingService</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.services.RoutingService.html">tomtom.services.RoutingService</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.services.TrafficService.html">tomtom.services.TrafficService</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.services.ViewportService.html">tomtom.services.ViewportService</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.TrafficClusterPopup.html">tomtom.TrafficClusterPopup</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.TrafficIncidentPopup.html">tomtom.TrafficIncidentPopup</a></li>
            
                <li><a href="..&#x2F;classes/tomtom.TrafficMarker.html">tomtom.TrafficMarker</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src&#x2F;main&#x2F;webapp&#x2F;js&#x2F;tomtom&#x2F;controls&#x2F;OverviewMap.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
define([
		&quot;..&#x2F;DomUtil&quot;,
		&quot;..&#x2F;Utils&quot;,
		&quot;..&#x2F;OpenLayers&quot;
	],
	function(du, utils) {
	
		var base = OpenLayers.Control.OverviewMap;
		
		tomtom.controls.OverviewMap = OpenLayers.Class(base, {
			
			minimizedSize: 32,
			
			&#x2F;**
			 * Creates an overview map which allows the user to easily navigate the map.
			 * Please note that this constructor shouldn&#x27;t be called directly.  The overviewMap property of the main map constructor&#x27;s options
			 * should be used to display and customize the overview map like so:
			 * 
			 * 	var map = new tomtom.Map({
			 * 		domNode: &quot;map&quot;,
			 * 		overviewMap: true
			 * 	});
			 *
			 * You can also pass custom options:
			 * 
			 *	var map = new tomtom.Map({
			 *		domNode: &quot;map&quot;,
			 *		overviewMap: {
			 *			size: new OpenLayers.Size(300, 300)
			 *		}
			 *	});
			 * 
			 * @constructor
			 * @class OverviewMap
			 * @namespace tomtom.controls
			 * @extends OpenLayers.Control.OverviewMap
			 * @param {Object} [options] The options used to customize the overview map.  See OpenLayers documentation for more information
			 * 	about the options which can be supplied.
			 *&#x2F;
			initialize: function(options) {
				this._eventHandlers = [];
				
				base.prototype.initialize.apply(this, arguments);
				
			},
			
			draw: function() {
				
				&#x2F;&#x2F; had to copy in all of the draw code from the base, excluding the minimize &#x2F; maximize div
				OpenLayers.Control.prototype.draw.apply(this, arguments);
				
				this.div.className = &quot;olControlOverviewMapContainer&quot;;
				
		        if (this.layers.length === 0) {
		            if (this.map.baseLayer) {
		                var layer = this.map.baseLayer.clone();
		                this.layers = [layer];
		            } else {
		                this.map.events.register(&quot;changebaselayer&quot;, this, this.baseLayerDraw);
		                return this.div;
		            }
		        }

		        &#x2F;&#x2F; create overview map DOM elements
		        this.element = document.createElement(&#x27;div&#x27;);
		        this.element.className = this.displayClass + &#x27;Element&#x27;;
		        this.element.style.display = &#x27;none&#x27;;

		        this.mapDiv = document.createElement(&#x27;div&#x27;);
		        this.mapDiv.style.width = this.size.w + &#x27;px&#x27;;
		        this.mapDiv.style.height = this.size.h + &#x27;px&#x27;;
		        this.mapDiv.style.position = &#x27;relative&#x27;;
		        this.mapDiv.style.overflow = &#x27;hidden&#x27;;
		        this.mapDiv.id = OpenLayers.Util.createUniqueID(&#x27;overviewMap&#x27;);
		        
		        this.extentRectangle = document.createElement(&#x27;div&#x27;);
		        this.extentRectangle.style.position = &#x27;absolute&#x27;;
		        this.extentRectangle.style.zIndex = 1000;  &#x2F;&#x2F;HACK
		        this.extentRectangle.className = this.displayClass+&#x27;ExtentRectangle&#x27;;

		        this.element.appendChild(this.mapDiv);  

		        this.div.appendChild(this.element);
				
				this.minimizeDiv = null;
				this.maximizeDiv = null;
				
				&#x2F;&#x2F; create our own button
				this.buttonNode = document.createElement(&quot;div&quot;);
				du.addClass(this.buttonNode, &quot;button&quot;);
				this.div.appendChild(this.buttonNode);
				
				&#x2F;&#x2F; create the inner button node
				this.buttonNode.appendChild(document.createElement(&quot;div&quot;));
				
				&#x2F;&#x2F; determine if the overview started maximized
				if (this.maximized)
					du.addClass(this.div, &quot;olControlOverviewMapContainerMaximized&quot;);
				
				&#x2F;&#x2F; wire up the click event
				this._eventHandlers.push(du.bind(this.buttonNode, &quot;click&quot;, function() {
					
					if (this.maximized)
						this.minimizeControl();
					else
						this.maximizeControl();
					
				}, this));
				
				&#x2F;&#x2F; wire up the window resize
				this._eventHandlers.push(du.bind(window, &quot;resize&quot;, function() {
					this.updatePosition(this.maximized);
				}, this));
				
				if(this.map.getExtent()) {
		            this.update();
		        }
		        
		        this.map.events.on({
		            buttonclick: this.onButtonClick,
		            moveend: this.update,
		            scope: this
		        });
		        
		        if (this.maximized) {
		            this.maximizeControl();
		        }
		        return this.div;
				
			},
			
			&#x2F;**
			 * Show&#x27;s the overview map.
			 * @method maximizeControl
			 *&#x2F;
			maximizeControl: function() {
				var parent = this.div.parentNode;
				du.css(this.element, &quot;display&quot;, &quot;&quot;);
				du.addClass(this.div, &quot;olControlOverviewMapContainerMaximized&quot;);
				
				&#x2F;&#x2F; IE is stupid, hence the need to check for the style property
				if (parent &amp;&amp; parent.style) {
					var dimensions = du.dimensions(parent);
					this.updatePosition(false);

					du.animate(this.div, {
						properties: {
							top: dimensions.height - (this.size.h + parseInt(du.css(this.div, &quot;padding-top&quot;)) + parseInt(du.css(this.div, &quot;padding-bottom&quot;))),
							left: dimensions.width - (this.size.w + parseInt(du.css(this.div, &quot;padding-left&quot;)) + parseInt(du.css(this.div, &quot;padding-right&quot;)))
						},
						
						duration: 250,
						
						callback: utils.hitch(this, function() {
							this.maximized = true;
							&#x2F;&#x2F; force a refresh of the overview map because IE can&#x27;t get its act together...
							this.updateOverview();
						})
					});
				}
			},
			
			&#x2F;**
			 * Hides the overview map.
			 * @method minimizeControl
			 *&#x2F;
			minimizeControl: function() {
				var parent = this.div.parentNode;
				du.css(this.element, &quot;display&quot;, &quot;&quot;);

				&#x2F;&#x2F; IE is stupid, hence the need to check for the style property
				if (parent &amp;&amp; parent.style) {
					var dimensions = du.dimensions(parent);
					this.updatePosition(true);
					
					du.animate(this.div, {
						properties: {
							top: dimensions.height - this.minimizedSize,
							left: dimensions.width - this.minimizedSize
						},
						
						duration: 250,
						
						callback: utils.hitch(this, function() {
							du.removeClass(this.div, &quot;olControlOverviewMapContainerMaximized&quot;);
							this.maximized = false;
						})
					});
				}
			},
			
			updatePosition: function(maximized) {
				var parent = this.div.parentNode;
				
				if (maximized) {
					du.css(this.div, &quot;top&quot;, parent.offsetHeight - (this.size.h + parseInt(du.css(this.div, &quot;padding-top&quot;)) + parseInt(du.css(this.div, &quot;padding-bottom&quot;))));
					du.css(this.div, &quot;left&quot;, parent.offsetWidth - (this.size.w + parseInt(du.css(this.div, &quot;padding-left&quot;)) + parseInt(du.css(this.div, &quot;padding-right&quot;))));
				} else {
					du.css(this.div, &quot;top&quot;, parent.offsetHeight - this.minimizedSize);
					du.css(this.div, &quot;left&quot;, parent.offsetWidth - this.minimizedSize);
				}
			},
			
			onButtonClick: function() {
				
			},
			
			createMap: function() {
				base.prototype.createMap.apply(this, arguments);
				
				var map = this.ovmap;
				
				&#x2F;&#x2F; override map methods
				map.isValidZoomLevel = function(zoom) { return zoom &lt;= 17; };
				map.adjustZoom = function(zoom) { if (zoom &gt; 17) return 17; else return zoom; };
			}
			
		});
		
		return tomtom.controls.OverviewMap;
	
	}
);
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
